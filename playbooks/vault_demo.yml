---
- name: Localhost Workstation
  hosts: localhost
  tasks:
    - name: "Demo: vault file"
      ansible.builtin.copy:
        src: "{{ playbook_dir }}/../files/hello_vault" # noqa: no-relative-paths
        dest: "/tmp/hello_vault"
        mode: "0600"

    - name: "Demo: Read file content"
      ansible.builtin.slurp:
        src: /tmp/hello_vault
      register: vault_file_content

    - name: "Demo: Decode file content"
      ansible.builtin.set_fact:
        vault_file: "{{ vault_file_content.content | b64decode }}"

    - name: "Demo: vault file"
      ansible.builtin.debug:
        msg: "{{ vault_file }}"

    - name: "Demo: inline vault"
      ansible.builtin.set_fact:
        inline_vault: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39353033383661333231373861633638313934663431366663613639623964353030303235323136
          3139636437333765666534633632646132613364653933610a336165653730353038333631666230
          37343533303466323463373861363963363962636261616264303762303234646133666130323063
          3161363865346236350a343963346166336531613766396163353464623933663265393965336236
          6163

    - name: "Demo: inline vault"
      ansible.builtin.debug:
        msg: "{{ inline_vault }}"
